---
description:
globs:
alwaysApply: false
---
# API设计

## 用户管理

### 用户注册
- **URL**: `/api/v1/users/register`
- **方法**: POST
- **请求参数**:
  ```json
  {
    "userAccount": "string",
    "userName": "string",
    "userPassword": "string",
    "userEmail": "string",
    "userPhone": "string"
  }
  ```
- **响应**:
  ```json
  {
    "code": 200,
    "message": "注册成功",
    "data": {
      "userId": 123,
      "userAccount": "string"
    }
  }
  ```

### 用户登录
- **URL**: `/api/v1/users/login`
- **方法**: POST
- **请求参数**:
  ```json
  {
    "userAccount": "string",
    "userPassword": "string"
  }
  ```
- **响应**:
  ```json
  {
    "code": 200,
    "message": "登录成功",
    "data": {
      "token": "string",
      "userId": 123,
      "userName": "string",
      "userRole": 3
    }
  }
  ```

## 日记管理

### 创建日记
- **URL**: `/api/v1/diaries`
- **方法**: POST
- **请求参数**:
  ```json
  {
    "title": "string",
    "content": "string",
    "diaryDate": "2023-06-01",
    "mood": 5,
    "tags": "工作,生活"
  }
  ```
- **响应**:
  ```json
  {
    "code": 200,
    "message": "创建成功",
    "data": {
      "diaryId": 456
    }
  }
  ```

### AI生成日记
- **URL**: `/api/v1/diaries/generate`
- **方法**: POST
- **请求参数**:
  ```json
  {
    "prompt": "今天去公园散步，感觉很放松",
    "templateId": 1
  }
  ```
- **响应**:
  ```json
  {
    "code": 200,
    "message": "生成成功",
    "data": {
      "title": "轻松的公园漫步",
      "content": "今天的午后...",
      "tags": "放松,户外活动"
    }
  }
  ```

## 报告管理

### 生成日报/周报/月报
- **URL**: `/api/v1/reports/generate`
- **方法**: POST
- **请求参数**:
  ```json
  {
    "type": 1,
    "startDate": "2023-06-01",
    "endDate": "2023-06-01"
  }
  ```
- **响应**:
  ```json
  {
    "code": 200,
    "message": "生成成功",
    "data": {
      "reportId": 789,
      "content": "今日完成工作...",
      "type": 1
    }
  }
  ```

## 待办事项管理

### 生成待办事项
- **URL**: `/api/v1/todos/generate`
- **方法**: POST
- **请求参数**:
  ```json
  {
    "diaryId": 456
  }
  ```
- **响应**:
  ```json
  {
    "code": 200,
    "message": "生成成功",
    "data": {
      "todos": [
        {
          "todoId": 111,
          "content": "预约医生"
        },
        {
          "todoId": 112,
          "content": "完成项目报告"
        }
      ]
    }
  }
  ```

## 开支管理

### 分析日记中的开支
- **URL**: `/api/v1/expenses/analyze`
- **方法**: POST
- **请求参数**:
  ```json
  {
    "diaryId": 456
  }
  ```
- **响应**:
  ```json
  {
    "code": 200,
    "message": "分析成功",
    "data": {
      "expenses": [
        {
          "item": "午餐",
          "amount": 50.0,
          "type": 2
        },
        {
          "item": "书籍",
          "amount": 99.0,
          "type": 2
        }
      ]
    }
  }
  ```

## 日记模版管理

### 获取模版列表
- **URL**: `/api/v1/templates`
- **方法**: GET
- **响应**:
  ```json
  {
    "code": 200,
    "message": "获取成功",
    "data": {
      "templates": [
        {
          "id": 1,
          "type": "简洁",
          "content": "今天我..."
        },
        {
          "id": 2,
          "type": "详细",
          "content": "早上醒来..."
        }
      ]
    }
  }
  ```
